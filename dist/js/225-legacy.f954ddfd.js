"use strict";(self["webpackChunkproject_1"]=self["webpackChunkproject_1"]||[]).push([[225],{4225:function(t,e,s){s.r(e),s.d(e,{default:function(){return o}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("el-steps",{attrs:{active:2,"align-center":""}},[s("el-step",{attrs:{title:"步骤1",description:"选择电影场次"}}),s("el-step",{attrs:{title:"步骤2",description:"选择座位号"}}),s("el-step",{attrs:{title:"步骤3",description:"加入购物车"}}),s("el-step",{attrs:{title:"步骤4",description:"结算付款"}})],1),s("div",{staticClass:"isBuy"},[s("div",{staticClass:"isLeft"},[s("div",{staticClass:"isFilm"},[s("img",{staticClass:"isImg",attrs:{src:t.filmList.cover,alt:""}}),s("div",{staticClass:"isInfo"},[s("p",{staticClass:"isName"},[t._v(t._s(t.filmList.name))]),s("p",[t._v("类型："+t._s(t.filmList.type))]),s("p",[t._v("地区："+t._s(t.filmList.region))]),s("p",[t._v("时长："+t._s(t.filmList.duration)+"分钟")])])]),s("div",{staticClass:"isTicket"},[s("p",[t._v("放映："+t._s(t.ticketList.type))]),s("p",{staticClass:"isStartTime"},[t._v(" 开场："+t._s(t.ticketList.date)+" "+t._s(t.ticketList.startTime)+" ")]),s("p",[t._v("散场："+t._s(t.ticketList.date)+" "+t._s(t.ticketList.endTime))]),s("p",[t._v("票价：¥"+t._s(t.ticketList.price)+"/张")])]),s("el-divider"),s("div",{staticClass:"isChoose"},[t._v(" 已选座位： "),t._l(t.userSelectSeats,(function(e,i){return s("el-tag",{key:i,staticStyle:{"margin-right":"5px"},attrs:{type:"danger",effect:"plain"}},[t._v(" "+t._s(e)+"号")])})),s("p",{staticClass:"isTotal"},[t._v(" 总计："),s("span",[t._v("¥"+t._s(t.total))])])],2),s("el-divider"),s("div",{staticClass:"isAdd"},[s("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),s("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){return t.submitSeats()}}},[t._v("加入购物车")])],1)],1),s("div",{staticClass:"isRight"},[t._m(0),s("br"),s("div",{staticClass:"isScreen"}),s("p",[t._v("银幕中央")]),s("div",{staticClass:"screen-line"}),s("div",{staticClass:"isSeats"},[s("div",{staticStyle:{margin:"0 auto",width:"480px",height:"200px"}},t._l(t.seats,(function(e,i){return s("span",{key:i},[0===e.status?s("span",{staticClass:"seat sold item"}):t._e(),1===e.status?s("span",{staticClass:"seat selectable item",on:{click:function(e){return t.handleSelect(i)}}}):t._e(),2===e.status?s("span",{staticClass:"seat selected item",on:{click:function(e){return t.handleDisSelect(i)}}}):t._e()])})),0)])])])],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"isImg"},[i("img",{attrs:{src:s(2605),alt:""}}),i("span",[t._v("可选座位")]),i("img",{attrs:{src:s(6577),alt:""}}),i("span",[t._v("已售座位")]),i("img",{attrs:{src:s(2146),alt:""}}),i("span",[t._v("已选座位")])])}],n=(s(561),s(6580)),r={data:function(){return{input:"",total:0,ticketList:[],filmList:[],selectSeats:[],userSelectSeats:[],seats:[]}},methods:{check:function(){return 0===this.userSelectSeats.length?(this.$message({message:"请选择座位",type:"warning"}),!1):11===this.input.length||(this.$message({message:"请输入11位的电话号码",type:"warning"}),!1)},submitSeats:function(){if(this.check()){for(var t=0;t<this.userSelectSeats.length;t++)this.seats+=this.userSelectSeats[t]+"号";this.$message({message:"已为您添加到购物车,请尽快付款",type:"success"}),this.$router.go(-1)}},handleSelect:function(t){if(this.userSelectSeats.length>3){var e=this.userSelectSeats[0]-1;this.seats[e].status=1,this.userSelectSeats.splice(0,1),this.userSelectSeats.push(t+1),this.seats[t].status=2,this.total=this.ticketList.price*this.userSelectSeats.length}else this.userSelectSeats.push(t+1),this.seats[t].status=2,this.total=this.ticketList.price*this.userSelectSeats.length},handleDisSelect:function(t){this.userSelectSeats.splice(this.userSelectSeats.indexOf(t+1),1),this.seats[t].status=1,this.total=this.ticketList.price*this.userSelectSeats.length},queryArrangement:function(){var t=this;(0,n.Wf)(this.$route.query.id).then((function(e){t.ticketList=e.data.arrangements,t.filmList=e.data.film,(0,n.pW)(t.$route.query.id).then((function(e){t.selectSeats=e.data,t.loadSeat()}))}))},loadSeat:function(){for(var t=this.ticketList.seatNumber,e=new Array(0),s=0;s<t;s++)-1===this.selectSeats.indexOf(s+1)?e[s]={seat:s+1,status:1}:e[s]={seat:s+1,status:0};this.seats=e}},mounted:function(){this.queryArrangement()}},u=r,c=s(1001),l=(0,c.Z)(u,i,a,!1,null,"449db2a0",null),o=l.exports},6580:function(t,e,s){s.d(e,{Ie:function(){return a},SI:function(){return r},Wf:function(){return p},X2:function(){return d},XG:function(){return f},_5:function(){return n},dn:function(){return o},eR:function(){return u},gC:function(){return c},m0:function(){return A},pW:function(){return h},zf:function(){return l}});var i=s(7350);function a(){return(0,i.Z)({url:"/api/poster",method:"get"})}function n(){return(0,i.Z)({url:"/api/status",method:"get"})}function r(){return(0,i.Z)({url:"/api/film/hot/limit",method:"get"})}function u(){return(0,i.Z)({url:"/api/film/hot/tabledata",method:"get"})}function c(){return(0,i.Z)({url:"/api/film",method:"get"})}function l(){return(0,i.Z)({url:"/film/region/type",method:"get"})}function o(){return(0,i.Z)({url:"/api/film/id",method:"get"})}function A(t){return(0,i.Z)({url:"/api/fe",method:"post",data:t})}function d(){return(0,i.Z)({url:"/api/fe",method:"get"})}function f(){return(0,i.Z)({url:"/api/arrangement/film/fid",method:"get"})}function p(){return(0,i.Z)({url:"/api/arrangement/id",method:"get"})}function h(){return(0,i.Z)({url:"/api/arrangement/getSeats/id",method:"get"})}},7350:function(t,e,s){s.d(e,{Z:function(){return l}});s(1539);var i=s(6166),a=s.n(i),n={API_URL:"https://www.fastmock.site/mock/bb8184025bf2675a801a55bd2eec58c9/shop01"},r=n,u=localStorage.getItem("token"),c=a().create({baseURL:r.API_URL,headers:{Autorization:u}});c.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){return console.log("err"+t),Promise.reject(t)}));var l=c},6577:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAaCAYAAACgoey0AAAAAXNSR0IArs4c6QAAAeRJREFUSA3tlr9Lw0AUx99dmyZtpRbBX6AOoiAG1KF1EXFUcBMEHRX/LV0EFyfBUhwFJwWdXC2CIKKIttU0TXLPd6kJaaFQz3bSB0kud+99P3ePl7swiNjZ4uz+h+PueAgs0v3rZowBpjXtYPXydi8QiwcN+ZTQlbEBFmNd5YKHyM4fXncJEYJ5FCxX2m2o1JearVlsAkcn0et2CD7NmVt6nMPdu0Up97rGrdY9X1NqFxbN7UDYBxfzs0XO4HCqPwVxzuH6uQIVxw18lJ9VWsDNSwU0EpfaQoijYt48kYKskDfXBIri0mgWaNy3Z8uBUtmC3FAm7GuMdH5HBLh4fIPpbBJGUrofKKjv6qlsuQgbHBnMj/cZdgCVHoNJzS8IyxWdk1o8bSFAi/EQKoclYzitySwvcCbQoKJrTCkSnCAvh4JVzaXlGdHVfAtxYDoCJsPiUgWoxv2DVTP347j/VP84ZaoBfy/VTT8C0bQ5KKDmefBiqe1etB+D3JvbWVvwZCYFj582xan9jSCdEhMZox0X2oKzehzk1Sv7Y8WFLMaR48PTZ93pVUpbde8rNaBjuMpuN83EXUnYVEJIx2e91bHb7/SNWOn08KBfslSBrLA8l9WNhNq30+Hs7Fqdr4/OlNnxsfcFxEaatII5mN4AAAAASUVORK5CYII="},2146:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAaCAYAAACgoey0AAAAAXNSR0IArs4c6QAAAoxJREFUSA3Fls9LFGEYx78z7rq7WuEiQqEVi1SHwjrVSU9aghURJYa2UUgd+nEuKAg6dK7cQ6FSCYrdosK/oFupFF46CLkFBZm7s+K4P2benmfGHRx3t5nZXdln2Zl5n3me5/O+z/vMMyNhk0RfY0zL4qrQIW1SV3wpyRA+P8ZfRTGcD+bLX/CZoeF9kMiwqiIEpJXvuEZBLbANwSutNpRXIFH+tmbRBq7qMh2CWeDLoxjgnV1bNlLu4Ob+di5txuTYQ+O4lPc0wEOjmNGAicZmUpMmEQfYoVLhGMmflOo6gGPrGiYHx/CW40oE7dUFZpojPDJR6RTNcgVo2mvuj6n1flxeJGALENy54SuAv0tQJR3nZR042hBGOg9lkwAZcpFRlXuSPY1H4JODho+eoxj0zFhQ1tLCgrsgU5Ufk2kQpIkEthJkSg9VomvparuDeye+4vjuqOFDaYVsVZAtTICYoeK3bHbOg66227hw8AmWlE+Y/T3t7EAWrsFXDk+he//dgqCdrbcI+tSAxuZ7sK4lC2yKKVyD6+UGnG1/jL7IIytOZ+tNXDz0jKCfEZs/CTWXsO45Xdha5v+MXy4M4HrHO5yK3Iegn5L5RdARxFOzBO0hKD0GHsQ1OKurePHlDG50vEdv5IGBiKfmMDLX7RnKzq5TzcYMf07whT8fsJj4iFiZUI7lesVszJLV1wh+2hxUcPS04go4Ba41A5dMNXceLUONnVpfWUJdb6P1F3UvCea3ybpS1MedkvpwKFzatCTYHwL4v11Ssz2uFbiOwT8yCjy+ecvfAJU7q8Cq9PAN6r8ljQ8BQbOgOt5eoZpTD7Sjxah4/u4dnETTDj88vPq9T3A1C/mcH0p/P7R/ODnAZaZCuGEAAAAASUVORK5CYII="},2605:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAaCAYAAACgoey0AAAAAXNSR0IArs4c6QAAAY9JREFUSA3tVs1qg0AQ3l1/i5eCFC8+QSC0+BQ999QeC32t9lLovac8RQwk6BOUXLzVitFE0/mEDVIiJsbkUgeM7jjzfd/OjpvlrGZhGL6uVqvnsix5zX3yoxBia5rm22g0etkL5vt+WRTFtm8DJrDrpKI+wExJXd3VyzMw/1axf5YDpe6IqRSPUJZlGdQdmN4eBixgAps4nmRGRUyOCTneXddlnHOWJEkv5CAFFjCBTeOP2Wz2CXI+nU7vqZkmnudVAXBuNptKpWVZGHa2OI4ZdTPTNK3CIB42n89TarYHQWpuHcfJoEqaqqqViFNKDhKUV5ICGxy2bQt6d4cfU1EUQ5LKO4KQ3NWQW5+MxAEXCbraNZd8can7QHypSrOh1EOpz1YBtQkZOw+2zK67V1teI7FhGGy9XjfpavWDWNf1xrhGYtpTGa5z2f/6jmkZFPwff0VR1H0xj1yL5XKJhv3hQRDoaZriILClKz8S5+hwIk3ptHNTHTtowBeLxXWe5/2d8vZIoi4X4/H4myZY/AJMWAAq2pF/7QAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=225-legacy.f954ddfd.js.map