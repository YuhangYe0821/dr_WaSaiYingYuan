"use strict";(self["webpackChunkproject_1"]=self["webpackChunkproject_1"]||[]).push([[644],{2644:function(t,e,n){n.r(e),n.d(e,{default:function(){return y}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("Header")],1),n("el-main",[n("router-view")],1),n("el-footer",[n("Footer")],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"homepage_header"},[r("img",{attrs:{src:n(6949),alt:""}}),r("span",{staticClass:"logo_text"},[t._v("哇塞影院")]),r("el-link",{staticClass:"to",attrs:{underline:!1,href:"/Homepage"}},[t._v("首页")]),r("el-link",{staticClass:"to",attrs:{underline:!1,href:"/Films"}},[t._v("电影")]),r("el-link",{staticClass:"to",attrs:{underline:!1,href:"/Activity"}},[t._v("活动")]),r("el-link",{staticClass:"to",attrs:{underline:!1,href:"/Comments"}},[t._v("留言")]),r("div",{staticClass:"header-search"},[r("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"请输入电影名"},on:{select:t.handleSelect},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1),0==t.isLogin?r("el-link",{staticStyle:{float:"right","padding-right":"120px","padding-top":"25px","font-size":"20px"},attrs:{href:"/Login",underline:!1}},[t._v("登录")]):t._e(),1==t.isLogin?r("div",{staticClass:"user"},[r("el-avatar",{attrs:{size:40,src:t.user.avatar}}),r("el-dropdown",[r("span",{staticClass:"username"},[t._v(t._s(t.user.nickname))]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("el-link",{staticStyle:{"padding-right":"7px"},attrs:{href:"/ShoppingCart",underline:!1}},[r("i",{staticClass:"el-icon-shopping-cart-2",staticStyle:{"font-size":"15px","padding-right":"3px"}}),t._v("购物车")])],1),r("el-dropdown-item",{attrs:{divided:""}},[r("el-link",{staticStyle:{"padding-right":"7px"},attrs:{href:"/Orders",underline:!1}},[r("i",{staticClass:"el-icon-s-order",staticStyle:{"font-size":"15px","padding-right":"3px"}}),t._v("我的订单")])],1),r("el-dropdown-item",{attrs:{divided:""}},[r("el-link",{staticStyle:{"padding-right":"7px"},attrs:{href:"/Settings",underline:!1}},[r("i",{staticClass:"el-icon-user-solid",staticStyle:{"font-size":"15px","padding-right":"3px"}}),t._v("个人设置")])],1),r("el-dropdown-item",{attrs:{divided:""}},[r("el-link",{staticStyle:{"padding-right":"7px"},attrs:{underline:!1},on:{click:t.handleLogout}},[r("i",{staticClass:"el-icon-switch-button",staticStyle:{"font-size":"15px","padding-right":"3px"}}),t._v("退出登录")])],1)],1)],1)],1):t._e(),r("p")],1)},a=[],o=(n(8309),n(6165)),l={data:function(){return{isLogin:!1,searchList:[],state:"",timeout:null,user:{}}},methods:{queryUser:function(){var t=this;null!==localStorage.getItem("uid")&&(0,o.ao)().then((function(e){console.log(e),t.isLogin=!0,t.user=e.data}))},handleLogout:function(){localStorage.clear(),this.$router.push("/login")},querySearchAsync:function(t,e){var n=this;t&&(0,o.XR)().then((function(t){setTimeout((function(){n.searchList=t.data,e(n.loadSearchList())}),500)}))},loadSearchList:function(){for(var t=new Array(0),e=0;e<this.searchList.length;e++)t.push({id:this.searchList[e].id,value:this.searchList[e].name});return t},handleSelect:function(t){console.log(t)}},mounted:function(){this.queryUser()}},c=l,u=n(1001),d=(0,u.Z)(c,s,a,!1,null,"2856a042",null),p=d.exports,h=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v("Copyright 2022 哇塞影院")]),n("p",[t._v("Neusiri")])])}],g={data:function(){return{}},methods:{}},m=g,v=(0,u.Z)(m,h,f,!1,null,"481bfe38",null),_=v.exports,x={data:function(){return{}},methods:{},components:{Header:p,Footer:_}},S=x,k=(0,u.Z)(S,r,i,!1,null,"7e58a688",null),y=k.exports},6165:function(t,e,n){n.d(e,{XR:function(){return o},aX:function(){return s},ao:function(){return a},m3:function(){return i}});var r=n(7350);function i(t){return(0,r.Z)({url:"/api/user/login",method:"post",data:t})}function s(t){return(0,r.Z)({url:"/api/user/register",method:"post",data:t})}function a(){return(0,r.Z)({url:"/api/user/id",method:"get"})}function o(){return(0,r.Z)({url:"/api/film/name",method:"get"})}},7350:function(t,e,n){n.d(e,{Z:function(){return c}});n(1539);var r=n(6166),i=n.n(r),s={API_URL:"https://www.fastmock.site/mock/bb8184025bf2675a801a55bd2eec58c9/shop01"},a=s,o=localStorage.getItem("token"),l=i().create({baseURL:a.API_URL,headers:{Autorization:o}});l.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){return console.log("err"+t),Promise.reject(t)}));var c=l},6949:function(t,e,n){t.exports=n.p+"img/logo.1f52265e.png"}}]);
//# sourceMappingURL=644-legacy.686ea20b.js.map